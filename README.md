# SSH Remote Command Plugin for uTools

一个功能强大的 uTools 插件，用于通过 SSH 连接远程服务器并执行命令。

## 功能特性

### 🔧 SSH 服务器配置管理
- 支持多个 SSH 服务器配置
- 支持密码和私钥两种认证方式
- 内置连接测试功能
- 支持自定义端口配置
- 安全的配置存储（使用 uTools 本地数据库）

### 💻 命令配置管理
- 预设常用系统管理命令
- 支持按分类管理命令（系统、Docker、Git、Nginx 等）
- 一键复制命令到剪贴板
- 支持命令描述和备注
- 快速添加自定义命令

### 🖥️ 终端操作界面
- 类似原生终端的操作体验
- 实时显示命令执行结果
- 支持命令历史记录（↑↓ 键浏览）
- 支持多服务器之间快速切换
- 双击快捷命令快速执行

### 🎯 智能交互
- 主界面默认为 SSH 登录选择
- 双击服务器配置快速连接
- 双击保存的命令快速执行
- 实时连接状态显示

## 安装使用

### 1. 开发环境运行

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

### 2. uTools 中使用

1. 在 uTools 开发者工具中导入本项目
2. 指向项目根目录的 `plugin.json` 文件
3. 开启 "隐藏插件后完全退出" 选项（推荐）

### 3. 插件指令

- `ssh` / `SSH` / `远程连接` - 打开主连接界面
- `ssh配置` / `SSH配置` - 管理 SSH 服务器配置
- `ssh命令` / `SSH命令` - 管理命令配置

## 使用教程

### 第一步：配置 SSH 服务器

1. 在 uTools 中输入 `ssh配置` 打开配置管理
2. 点击 "添加配置" 按钮
3. 填写服务器信息：
   - 配置名称：如 "生产服务器"
   - 主机地址：IP 地址或域名
   - 端口：默认 22
   - 用户名：SSH 用户名
   - 认证方式：选择密码或私钥
   - 填写对应的密码或私钥内容
4. 点击 "测试连接" 验证配置
5. 保存配置

### 第二步：配置常用命令（可选）

1. 在 uTools 中输入 `ssh命令` 打开命令管理
2. 可以使用预设的常用命令模板
3. 或者添加自定义命令：
   - 命令名称：如 "查看内存使用"
   - 分类：选择适当的分类
   - 命令内容：如 `free -h`
   - 描述：命令的作用说明

### 第三步：连接和使用

1. 在 uTools 中输入 `ssh` 打开主界面
2. 双击要连接的服务器配置
3. 连接成功后可以：
   - 在终端标签页直接输入命令执行
   - 在快捷命令标签页双击预设命令执行
   - 使用 ↑↓ 键浏览命令历史

## 技术架构

### 前端技术栈
- **React 19** - 用户界面框架
- **Vite** - 构建工具
- **CSS3** - 样式和响应式布局

### 后端能力（preload）
- **ssh2** - SSH 连接库
- **node-pty** - 终端模拟（预留）
- **uTools API** - 本地数据存储和系统集成

### 核心功能模块
- `SSHConfig` - SSH 配置管理组件
- `SSHCommand` - 命令配置管理组件  
- `SSHMain` - 主连接和执行界面
- `preload/services.js` - Node.js 能力封装

## 安全说明

- 所有 SSH 配置和密码使用 uTools 本地数据库存储
- 不会上传任何敏感信息到服务器
- 私钥内容仅在本地处理和使用
- 建议使用私钥认证提高安全性

## 开发说明

### 项目结构
```
src/
├── App.jsx              # 主应用组件和路由
├── SSHMain/            # SSH 主界面
├── SSHConfig/          # SSH 配置管理
├── SSHCommand/         # 命令配置管理
├── main.css            # 全局样式
└── main.jsx            # 应用入口

public/
├── plugin.json         # uTools 插件配置
└── preload/
    └── services.js     # Node.js 服务封装
```

### 添加新功能

1. 在 `preload/services.js` 中添加 Node.js 能力
2. 在相应的 React 组件中调用 `window.services`
3. 更新 `plugin.json` 中的功能配置
4. 在 `App.jsx` 中添加路由

## 常见问题

### Q: 连接超时怎么办？
A: 检查网络连接、服务器地址、端口和防火墙设置。

### Q: 私钥认证失败怎么办？  
A: 确保私钥格式正确，检查是否需要 passphrase。

### Q: 命令执行没有输出？
A: 某些命令可能需要交互式输入，建议使用非交互式参数。

## 更新日志

### v1.0.0
- 完整的 SSH 连接功能
- 配置和命令管理
- 终端界面操作
- 多服务器支持

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个插件！

## 许可证

MIT License